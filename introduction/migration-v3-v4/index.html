
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/logo-round.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Migration V3 -> V4 - JDA Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/colors.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/frontpage.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migration-guide-3x-to-4x" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="JDA Wiki" class="md-header__button md-logo" aria-label="JDA Wiki" data-md-component="logo">
      <style>
  /* We want the logo imagine to consume the full height, so remove the default applied margin and padding */
  .md-header__button.md-logo {
    padding: 0;
    margin: 0;
  }

  .header__logo {
    height: 46px !important; /* !important to override strong theme specificity */
  }
</style>

<!-- Logo -->


  <img class="header__logo" src="../../assets/images/logo-transparent.svg" alt="logo" />

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            JDA Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migration V3 -> V4
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DV8FromTheWorld/JDA" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    JDA
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../jda/" class="md-tabs__link md-tabs__link--active">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../setup/intellij/" class="md-tabs__link">
        Setup
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../using-jda/getting-started/" class="md-tabs__link">
        Using JDA
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/contributing/" class="md-tabs__link">
        Contributing
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://ci.dv8tion.net/job/JDA5/javadoc/" class="md-tabs__link">
      Javadocs
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="JDA Wiki" class="md-nav__button md-logo" aria-label="JDA Wiki" data-md-component="logo">
      <style>
  /* We want the logo imagine to consume the full height, so remove the default applied margin and padding */
  .md-header__button.md-logo {
    padding: 0;
    margin: 0;
  }

  .header__logo {
    height: 46px !important; /* !important to override strong theme specificity */
  }
</style>

<!-- Logo -->


  <img class="header__logo" src="../../assets/images/logo-transparent.svg" alt="logo" />

    </a>
    JDA Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DV8FromTheWorld/JDA" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    JDA
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jda/" class="md-nav__link">
        JDA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        Using Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events-list/" class="md-nav__link">
        List of Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Migration V3 -> V4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Migration V3 -> V4
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extensions-that-support-4x" class="md-nav__link">
    Extensions That Support 4.X
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#package-layout-changes" class="md-nav__link">
    Package layout changes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removed-features" class="md-nav__link">
    Removed Features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#renamed-classes" class="md-nav__link">
    Renamed Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#renamed-methods" class="md-nav__link">
    Renamed Methods
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changed-functionality" class="md-nav__link">
    Changed Functionality
  </a>
  
    <nav class="md-nav" aria-label="Changed Functionality">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jdabuilder-and-defaultshardmanagerbuilder" class="md-nav__link">
    JDABuilder and DefaultShardManagerBuilder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permission-lists" class="md-nav__link">
    Permission Lists
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-attachments" class="md-nav__link">
    Message Attachments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#audio-system" class="md-nav__link">
    Audio System
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#permissionoverride" class="md-nav__link">
    PermissionOverride
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guildcontroller" class="md-nav__link">
    GuildController
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#messages" class="md-nav__link">
    Messages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compression" class="md-nav__link">
    Compression
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restaction" class="md-nav__link">
    RestAction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/intellij/" class="md-nav__link">
        IntelliJ IDEA Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/eclipse/" class="md-nav__link">
        Eclipse Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/netbeans/" class="md-nav__link">
        Netbeans Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/logging/" class="md-nav__link">
        Logging (SLF4J)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Using JDA
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Using JDA" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Using JDA
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/making-a-music-bot/" class="md-nav__link">
        Making a Music Bot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/using-restaction/" class="md-nav__link">
        Using RestAction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/interactions/" class="md-nav__link">
        Interactions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/paginating-entities/" class="md-nav__link">
        Paginating Entities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/gateway-intents-and-member-cache-policy/" class="md-nav__link">
        Gateway Intents and Member Cache Policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/MinnDevelopment/discord-webhooks" class="md-nav__link">
        Webhooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/separation-of-concerns/" class="md-nav__link">
        Managers and Moderation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/using-new-features/" class="md-nav__link">
        Using New Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../using-jda/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/structure-guide/" class="md-nav__link">
        Structure Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/repository-structure/" class="md-nav__link">
        Repository Structure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://ci.dv8tion.net/job/JDA5/javadoc/" class="md-nav__link">
        Javadocs
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/DV8FromTheWorld/JDA-Website/edit/master/docs/introduction/migration-v3-v4.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="migration-guide-3x-to-4x">Migration Guide 3.X to 4.X<a class="headerlink" href="#migration-guide-3x-to-4x" title="Permanent link">&para;</a></h1>
<p>This version includes a number of breaking changes.</p>
<h2 id="extensions-that-support-4x">Extensions That Support 4.X<a class="headerlink" href="#extensions-that-support-4x" title="Permanent link">&para;</a></h2>
<p>Here is a list of known extensions that support 4.X.
The ones that are not checked do not support it yet. You should check that everything used in your project supports 4.X before starting migration.</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <a href="https://github.com/MinnDevelopment/jda-reactor">jda-reactor</a></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <a href="https://github.com/sedmelluq/lavaplayer">LavaPlayer</a></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <a href="https://github.com/sedmelluq/jda-nas">jda-nas</a> (since <a href="https://bintray.com/sedmelluq/com.sedmelluq/jda-nas/1.1.0">1.1.0</a>)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <a href="https://github.com/JDA-Applications/JDA-Utilities">JDA-Utilities</a> (since <a href="https://bintray.com/jagrosh/maven/JDA-Utilities/3.0.1">3.0.1</a>)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <a href="https://github.com/FredBoat/Lavalink-Client">Lavalink Client</a> (since <a href="https://github.com/FredBoat/Lavalink-Client/tree/4.0">4.0</a>)</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled/><span class="task-list-indicator"></span></label> <a href="https://github.com/sedmelluq/jdaction">JDAction</a> (see <a href="https://github.com/sedmelluq/jdaction/pull/6">#6</a>)</li>
</ul>
<h2 id="package-layout-changes">Package layout changes<a class="headerlink" href="#package-layout-changes" title="Permanent link">&para;</a></h2>
<p>Since we removed the client-only features from JDA the package didn't make much sense anymore.
Instead we have merged <code>core</code>, <code>bot</code>, and <code>client</code> into <code>api</code>. The new package prefix for the API functionality is now <code>net.dv8tion.jda.api</code>.</p>
<p>If you used internal classes they will not be available under this prefix but instead use <code>net.dv8tion.jda.internal</code>.
Something like <code>net.dv8tion.jda.core.entities.impl</code> has been moved to <code>net.dv8tion.jda.internal.entities</code> since the internal packages only contain implementations anyway.</p>
<p>In the case that <code>PermissionUtil.checkPermissions</code> was used in your code, this should be changed to <code>member.hasPermission(...)</code> or <code>role.hasPermission(...)</code>.</p>
<h2 id="removed-features">Removed Features<a class="headerlink" href="#removed-features" title="Permanent link">&para;</a></h2>
<p>Almost everything from <code>net.dv8tion.jda.client</code> has been removed as its not supported by the API and can lead to account termination which we don't want to happen. Additionally, most of the features advertised by the interfaces in <code>client</code> were not even implemented or documented properly.
Everything on <code>JDABot</code> has been moved into <code>JDA</code>.</p>
<p>The flag to disable the audio system with <code>setAudioEnabled(false)</code> has been removed. This flag only enabled an exception for <code>Guild.getAudioManager()</code> which is unnecessary.</p>
<p>The entire <code>net.dv8tion.jda.webhook</code> package has been moved to a dedicated library at <a href="https://github.com/MinnDevelopment/discord-webhooks">https://github.com/MinnDevelopment/discord-webhooks</a></p>
<p>The methods <code>buildBlocking</code> and <code>buildAsync</code> have been removed as they were already deprecated. To replace <code>buildBlocking</code> you should use <code>awaitReady()</code> on the <code>JDA</code> instance returned by <code>build()</code>.</p>
<p>The overloads for <code>sendFile</code> that accepted a <code>Message</code> as their last parameter have been removed in favor of <code>MessageAction.addFile</code>. For example <code>sendFile(file, message)</code> becomes <code>sendMessage(message).addFile(file)</code>.</p>
<p>Both <code>getWebSocketTrace</code> and <code>getCloudflareRays</code> have been removed without replacements. These are not officially supported by the Discord API and subject to change.</p>
<h2 id="renamed-classes">Renamed Classes<a class="headerlink" href="#renamed-classes" title="Permanent link">&para;</a></h2>
<p>Some classes have been renamed to better represent their meaning.</p>
<ul>
<li><code>Channel</code> -&gt; <code>GuildChannel</code></li>
<li><code>Game</code> -&gt; <code>Activity</code> (also <code>CacheFlag.GAME</code> -&gt; <code>CacheFlag.ACTIVITY</code>)</li>
<li><code>GuildMemberNickChangeEvent</code> -&gt; <code>GuildMemberUpdateNicknameEvent</code></li>
</ul>
<h2 id="renamed-methods">Renamed Methods<a class="headerlink" href="#renamed-methods" title="Permanent link">&para;</a></h2>
<p>A few methods were renamed for better consistency and clarity.</p>
<ul>
<li><code>JDABuilder.addEventListener</code> -&gt; <code>JDABuilder.addEventListeners</code></li>
<li><code>JDABuilder.setGame</code> -&gt; <code>JDABuilder.setActivity</code> (same for <code>Presence</code> and <code>DefaultShardManagerBuilder</code>)</li>
<li><code>Invite.getURL</code> -&gt; <code>Invite.getUrl</code></li>
<li><code>JDA.getPing</code> -&gt; <code>JDA.getGatewayPing</code></li>
<li><code>JDA.getWebhookById</code> -&gt; <code>JDA.retrieveWebhookById</code></li>
<li><code>Guild.getWebhooks</code> -&gt; <code>Guild.retrieveWebhooks</code> (same for <code>TextChannel</code>)</li>
<li><code>Guild.getInvites</code> -&gt; <code>Guild.retrieveInvites</code> (same for <code>GuildChannel</code>)</li>
<li><code>Guild.getAuditLogs</code> -&gt; <code>Guild.retrieveAuditLogs</code></li>
<li><code>Guild.getBan[ById|List]</code> -&gt; <code>Guild.retrieveBan[ById|List]</code></li>
<li><code>Guild.getVanityUrl</code> -&gt; <code>Guild.retrieveVanityUrl</code></li>
<li><code>MessageChannel.getMessageById</code> -&gt; <code>MessageChannel.retrieveMessageById</code></li>
<li><code>JDA.getApplicationInfo</code> -&gt; <code>JDA.retrieveApplicationInfo</code></li>
<li><code>AudioManager.getReceiveHandler</code> -&gt; <code>AudioManager.getReceivingHandler</code></li>
<li><code>GuildController.addSingleRoleToMember</code> -&gt; <code>Guild.addRoleToMember</code> (same for <code>removeSingleRoleFromMember</code>)</li>
<li><code>GuildController.setNickname</code> -&gt; <code>Guild.modifyNickname</code></li>
<li><code>GuildMemberNickChangeEvent.getPrevNick</code> -&gt; <code>GuildMemberUpdateNicknameEvent.getOldNickname</code></li>
<li><code>GuildMemberNickChangeEvent.getNewNick</code> -&gt; <code>GuildMemberUpdateNicknameEvent.getNewNickname</code></li>
<li><code>ISnowflake.getCreationTime</code> -&gt; <code>ISnowflake.getTimeCreated</code></li>
</ul>
<h2 id="changed-functionality">Changed Functionality<a class="headerlink" href="#changed-functionality" title="Permanent link">&para;</a></h2>
<p>Some methods have changed their signature in a breaking way. This is supposed to improve either internal code or make the interface more versatile.</p>
<h3 id="jdabuilder-and-defaultshardmanagerbuilder">JDABuilder and DefaultShardManagerBuilder<a class="headerlink" href="#jdabuilder-and-defaultshardmanagerbuilder" title="Permanent link">&para;</a></h3>
<p>As of <strong>4.2.0</strong> the JDABuilder constructor has been deprecated in favor of 3 factory methods:</p>
<ul>
<li><a href="https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/JDABuilder.html#createDefault(java.lang.String)"><code>createDefault</code></a></li>
<li><a href="https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/JDABuilder.html#createLight(java.lang.String)"><code>createLight</code></a></li>
<li><a href="https://ci.dv8tion.net/job/JDA/javadoc/net/dv8tion/jda/api/JDABuilder.html#create(java.lang.String,net.dv8tion.jda.api.requests.GatewayIntent,net.dv8tion.jda.api.requests.GatewayIntent...)"><code>create</code></a></li>
</ul>
<p>Further details are explained in a dedicated wiki page here: <a href="../../using-jda/gateway-intents-and-member-cache-policy/">Gateway Intents and Member Cache Policy</a></p>
<h3 id="permission-lists">Permission Lists<a class="headerlink" href="#permission-lists" title="Permanent link">&para;</a></h3>
<p>Everything that once returned <code>List&lt;Permission&gt;</code> has been changed to return <code>EnumSet&lt;Permission&gt;</code> instead for a better representation.</p>
<h3 id="message-attachments">Message Attachments<a class="headerlink" href="#message-attachments" title="Permanent link">&para;</a></h3>
<p>You can no longer use blocking operations to download attachments of a message. Instead we replaced the old <code>download()</code> with <code>downloadToFile()</code> and similar methods. These use <code>CompletableFuture</code> to provide continuations such as <code>thenAccept</code> and <code>whenComplete</code>. Examples are provided in the documentation for the respective methods.</p>
<h3 id="audio-system">Audio System<a class="headerlink" href="#audio-system" title="Permanent link">&para;</a></h3>
<p><code>AudioSendHandler.provide20MsAudio()</code> now returns <code>ByteBuffer</code> instead of <code>byte[]</code>. An easy transition is to use <code>ByteBuffer.wrap(byte[])</code>. This was done to allow re-using the same buffer for multiple packets instead of allocating a fitting array every time.</p>
<h3 id="permissionoverride">PermissionOverride<a class="headerlink" href="#permissionoverride" title="Permanent link">&para;</a></h3>
<p><code>PermissionOverride.getManager()</code> now returns a <code>PermissionOverrideAction</code> instead to remove code duplication. You can now also use <code>GuildChannel.upsertPermissionOverride</code> which will either return <code>getManager()</code> on an existing override or use <code>putPermissionOverride()</code> if there is no existing override.</p>
<h3 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h3>
<p><code>IEventManager.handle</code>, <code>EventListener.onEvent</code>, and <code>ListenerAdapter.onGenericEvent</code> now accepts <code>GenericEvent</code> which is a new interface that allows a more versatile hierarchy for the events it can handle. <code>UpdateEvent</code> is now a subinterface for <code>GenericEvent</code>.</p>
<h3 id="guildcontroller">GuildController<a class="headerlink" href="#guildcontroller" title="Permanent link">&para;</a></h3>
<p>The methods provided by the old <code>GuildController</code> class have been moved into the <code>Guild</code> interface. The <code>GuildController</code> has been removed completely. Additionally, <code>Member</code> received a few new shortcuts like <code>Member.ban(int)</code>.</p>
<p>The methods <code>addRolesToMember</code> and <code>removeRolesFromMember</code> have been removed and should be replaced with <code>modifyMemberRoles</code>.</p>
<h3 id="messages">Messages<a class="headerlink" href="#messages" title="Permanent link">&para;</a></h3>
<p>Since we added <code>@Nonnull</code> and <code>@Nullable</code> annotations we had to compromise on conditional nullability. This means the methods like <code>Message.getTextChannel</code> now <strong>throw</strong> instead of returning <code>null</code> if the message was not sent in a <code>TextChannel</code>. You can use <code>Message.isFromType</code> to test for the channel type.</p>
<h3 id="compression">Compression<a class="headerlink" href="#compression" title="Permanent link">&para;</a></h3>
<p>To support other compression algorithms like <code>zstd</code> that Discord may offer in the future we changed <code>setCompressionEnabled</code> to <code>setCompression</code>. In this change we also replaced the <code>boolean</code> with a new enum for each algorithm. The new way to disable compression is <code>setCompression(Compression.NONE)</code>.</p>
<h3 id="restaction">RestAction<a class="headerlink" href="#restaction" title="Permanent link">&para;</a></h3>
<p>All <code>RestAction</code> types have been changed to be interfaces to improve maintainability. Additionally, <code>submitAfter</code> now returns <code>DelayedCompletableFuture</code> to allow usage of continuations.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../faq/" class="md-footer__link md-footer__link--prev" aria-label="Previous: FAQ" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              FAQ
            </div>
          </div>
        </a>
      
      
        
        <a href="../../setup/intellij/" class="md-footer__link md-footer__link--next" aria-label="Next: IntelliJ IDEA Setup" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              IntelliJ IDEA Setup
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <style>
  .footer__container {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0 auto; /* Float to the middle */
    padding: 10px;
  }
  .footer__columns {
    display: flex;
    justify-content: space-around;
    width: 100%
  }
  .footer__column h3 {
    margin: 0
  }
  .footer__column ul {
    list-style: none;
    margin-left: 0 !important; /* overriding theme CSS overly-strong selectors */
  }
  .footer__column li {
    margin-left: 0 !important; /* overriding theme CSS overly-strong selectors */
  }
  .footer__copyright {
    text-align: center;
  }
</style>

<div class="footer__container">
  <div class="md-copyright footer__columns">
    <div class="footer__column">
      <h3>Resources</h3>
      <div class="md-copyright__highlight">
        <ul>
          <li><a href="https://ci.dv8tion.net/job/JDA5/javadoc/" target="_blank" rel="noopener">Javadocs</a></li>
          <li><a href="https://github.com/DV8FromTheWorld/JDA" target="_blank" rel="noopener">GitHub (JDA)</a></li>
          <li><a href="https://github.com/DV8FromTheWorld/JDA-Website" target="_blank" rel="noopener">GitHub (Wiki)</a></li>
          <li><a href="https://discord.dev" target="_blank" rel="noopener">Discord API Docs</a></li>
        </ul>
      </div>
    </div>
    <div class="footer__column">
      <h3>Community</h3>
      <div class="md-copyright__highlight">
        <ul>
          <li><a href="https://discord.gg/JDA" target="_blank" rel="noopener">Discord Server</a></li>
          <li><a href="https://opencollective.com/java-jda" target="_blank" rel="noopener">Open Collective</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="md-copyright">
    <div class="md-copyright__highlight footer__copyright">
      Copyright 2015 Austin Keener, Michael Ritter, Florian Spieß, and <a href="https://github.com/DV8FromTheWorld/JDA-Website/graphs/contributors" target="_blank">Wiki Contributors</a>
    </div>
  </div>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "toc.integrate", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>